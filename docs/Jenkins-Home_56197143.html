<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins SOE : Jenkins Home</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins SOE</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                    <img src="images/icons/contenttypes/home_page_16.png" height="16" width="16" border="0" align="absmiddle" alt="Home Page" style="float: none; vertical-align: middle;"/>
                                                <span id="title-text">
                            Jenkins SOE : Jenkins Home
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Geoff Gatward</span>, last modified on Aug 12, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="contentLayout2">
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>Continuous Integration for Infrastructure (CII) is a process by which the Operating System build (&quot;build&quot;) component of a Standard Operating Environment (SOE) can be rapidly developed, tested and deployed.</p><p>A build is composed of the following components:</p><ul><li>Red Hat provided base packages</li><li>3rd party and in-house developed packages</li><li>Deployment instructions in the form of kickstart templates</li><li>Configuration instructions in the form of puppet modules</li><li>Test instructions in the form of BATS scripts</li></ul><p>The CII system consists of the following components:</p><ul><li>A git repository, containing the CI scripts to drive Jenkins.</li><li>A git repository, containing the kickstarts and BATS scripts.</li><li>Optionally, one or more git repositories, containing custom (in-house) puppet modules.</li><li>A yum repository, containing custom (in-house) RPM packages.</li><li>A Jenkins instance. This is responsible for pushing artifacts into the Red Hat Satellite, and orchestrating and reporting tests.</li><li>The Jenkins instance can also be responsible for building artifacts such as RPMs and Puppet modules, and pushing those artifacts to the relevent repositories (These builds are not covered by this project).</li><li>Red Hat Satellite 6. This acts as the repository for Red Hat-provided and 3rd party packages, kickstarts and puppet modules. Satellite is also used to deploy test clients.</li><li>A virtualisation infrastructure to run test clients. KVM/Libvirt, VMware and RHEV have all been used.</li><li>Optionally, A puppet-forge mirror. This provides access to puppet-forge modules if the environment is disconnected from the internet. In a disconnected environment, consider <a class="external-link" href="https://github.com/unibet/puppet-forge-server" rel="nofollow">https://github.com/unibet/puppet-forge-server</a></li></ul><h2 id="JenkinsHome-Credit">Credit</h2><p>This is a re-hash of the framework created by Nick Strugnell and the RedHatEMEA team. The original CI code can be found at <a class="external-link" href="https://github.com/RedHatEMEA/soe-ci" rel="nofollow">https://github.com/RedHatEMEA/soe-ci</a></p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<hr/><p>


<div class="plugin_pagetree">

        
        
    <ul class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
        <div class="plugin_pagetree_children">
        </div>
    </ul>

    <fieldset class="hidden">
        <input type="hidden" name="treeId" value="">
        <input type="hidden" name="treeRequestId" value="/wiki/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=false&amp;sort=position&amp;reverse=false&amp;disableLinks=false&amp;expandCurrent=false">
        <input type="hidden" name="treePageId" value="56197143">

        <input type="hidden" name="noRoot" value="false">
        <input type="hidden" name="rootPageId" value="56197143">

        <input type="hidden" name="rootPage" value="">
        <input type="hidden" name="startDepth" value="3">
        <input type="hidden" name="spaceKey" value="JEN" >

        <input type="hidden" name="i18n-pagetree.loading" value="Loading...">
        <input type="hidden" name="i18n-pagetree.error.permission" value="Unable to load page tree. It seems that you do not have permission to view the root page.">
        <input type="hidden" name="i18n-pagetree.eeror.general" value="There was a problem retrieving the page tree. Please check the server log file for more information.">
        <input type="hidden" name="loginUrl" value="">
        <input type="hidden" name="mobile" value="false">

                <fieldset class="hidden">
                            <input type="hidden" name="ancestorId" value="56197143">
                    </fieldset>
    </fieldset>
</div>

</p><hr/></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>A new build of the SOE can be requested by one of several methods, notably</p><ul><li>Manual</li><li>Automatic trigger when changes are detected in the Git repository</li><li>Automatic trigger when new content is published in Satellite</li></ul><p>When a build is requested, Jenkins orchestrates a build and test cycle, using pre-defined VM hosts. In essence, the process is as below:</p><p><span class="confluence-embedded-file-wrapper"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" src="attachments/56197143/78839874.png" data-image-src="attachments/56197143/78839874.png" data-unresolved-comment-count="0" data-linked-resource-id="78839874" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="SOE Build Process - pipeline - Standard(2).png" data-base-url="https://redhat-anzservices.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="56197143" data-linked-resource-container-version="8" data-media-id="9b805781-343d-40cd-9bf5-5cd323a1d705" data-media-type="file"></span></span></p><p>In the flowchart above, Satellite is used to trigger a reboot/rebuild of the VM hosts using the Compute Resource integration between Satellite and vCenter. This project also support direct integration between Jenkins and vCenter for this reboot/rebuild action, as well as a 'manual' mode in case no integration is possible.</p><h2 id="JenkinsHome-JenkinsPipeline">Jenkins Pipeline</h2><p>Each phase of the build process is a seperate Jenkins pipeline step. From the Jenkins UI the project looks like this:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="665" width="1170" src="attachments/56197143/78839878.png?width=1170" data-image-src="attachments/56197143/78839878.png" data-unresolved-comment-count="0" data-linked-resource-id="78839878" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jks1.png" data-base-url="https://redhat-anzservices.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="56197143" data-linked-resource-container-version="8" data-media-id="0ff35cf4-7984-49a5-add6-b15c37440eb8" data-media-type="file"></span></span></p><p>From this pipeline view, the overall status of the build can be easily seen, as well as the point of failure of any stage within the pipeline. In this case the 'Approval' stage was unsuccessful (due to a timeout or specific deny action)</p><p><br/></p><hr/></div>
</div>
</div>
<div class="columnLayout two-equal" data-layout="two-equal">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="JenkinsHome-Recentspaceactivity">Recent space activity</h2><p>    

<div class="recently-updated recently-updated-social" >
            <div class="hidden parameters">
    <input type="hidden" id="changesUrl" value="/wiki/plugins/recently-updated/changes.action?theme=social&amp;pageSize=5&amp;spaceKeys=JEN&amp;contentType=page, comment, blogpost">
</div>
    <div class="results-container">
        <ul class="update-groupings">
        <li class="grouping">
                <div class="update-item-profile">
            <a class="confluence-userlink url fn" data-username="ggatward" href="/wiki/display/~ggatward"><img class="userLogo logo" src="aa-avatar/6eb09747424cb68140c29e4d0c7c2352" alt="" title="ggatward"></a>
        </div>
        <ul class="update-items">
            <div><a class="confluence-userlink url fn" data-username="ggatward" href="/wiki/display/~ggatward">Geoff Gatward</a></div>
                        <li class="update-item">
                <div class="update-item-icon">
                    <span class="icon content-type-page"></span>
                </div>
                <div class="update-item-details">
                    <span class="update-item-content">
                                                    <a href="Jenkins-Home_56197143.html" title="data-linked-resource-id="56197143" data-linked-resource-version="8" data-linked-resource-type="page"" Jenkins SOE>Jenkins Home</a>
                                            </span>
                    <span class="update-item-date">updated less than a minute ago</span>
                                            <span class="update-item-changes"> <a class="changes-link" href="/wiki/pages/diffpagesbyversion.action?pageId=56197143&selectedPageVersions=8&selectedPageVersions=7">view change</a></span>
                                                                            </div>
            </li>
                        <li class="update-item">
                <div class="update-item-icon">
                    <span class="icon content-type-page"></span>
                </div>
                <div class="update-item-details">
                    <span class="update-item-content">
                                                    <a href="Building-the-SOE_58294334.html" title="data-linked-resource-id="58294334" data-linked-resource-version="2" data-linked-resource-type="page"" Jenkins SOE>Building the SOE</a>
                                            </span>
                    <span class="update-item-date">updated 13 minutes ago</span>
                                            <span class="update-item-changes"> <a class="changes-link" href="/wiki/pages/diffpagesbyversion.action?pageId=58294334&selectedPageVersions=2&selectedPageVersions=1">view change</a></span>
                                                                            </div>
            </li>
                        <li class="update-item">
                <div class="update-item-icon">
                    <span class="icon content-type-page"></span>
                </div>
                <div class="update-item-details">
                    <span class="update-item-content">
                                                    <a href="Configuration_58294326.html" title="data-linked-resource-id="58294326" data-linked-resource-version="11" data-linked-resource-type="page"" Jenkins SOE>Configuration</a>
                                            </span>
                    <span class="update-item-date">updated about 2 hours ago</span>
                                            <span class="update-item-changes"> <a class="changes-link" href="/wiki/pages/diffpagesbyversion.action?pageId=58294326&selectedPageVersions=11&selectedPageVersions=10">view change</a></span>
                                                                            </div>
            </li>
                        <li class="update-item">
                <div class="update-item-icon">
                    <span class="icon content-type-page"></span>
                </div>
                <div class="update-item-details">
                    <span class="update-item-content">
                                                    <a href="vSphere_58359852.html" title="data-linked-resource-id="58359852" data-linked-resource-version="3" data-linked-resource-type="page"" Jenkins SOE>vSphere</a>
                                            </span>
                    <span class="update-item-date">updated about 2 hours ago</span>
                                            <span class="update-item-changes"> <a class="changes-link" href="/wiki/pages/diffpagesbyversion.action?pageId=58359852&selectedPageVersions=3&selectedPageVersions=2">view change</a></span>
                                                                            </div>
            </li>
                        <li class="update-item">
                <div class="update-item-icon">
                    <span class="icon content-type-page"></span>
                </div>
                <div class="update-item-details">
                    <span class="update-item-content">
                                                    <a href="58359845.html" title="data-linked-resource-id="58359845" data-linked-resource-version="3" data-linked-resource-type="page"" Jenkins SOE>Installing Jenkins (Slave)</a>
                                            </span>
                    <span class="update-item-date">updated Jul 18, 2017</span>
                                            <span class="update-item-changes"> <a class="changes-link" href="/wiki/pages/diffpagesbyversion.action?pageId=58359845&selectedPageVersions=3&selectedPageVersions=2">view change</a></span>
                                                                            </div>
            </li>
                    </ul>
    </li>
    </ul>
<div class="more-link-container">
    <a class="more-link" href="/wiki/plugins/recently-updated/changes.action?theme=social&amp;pageSize=5&amp;startIndex=5&amp;searchToken=1&amp;spaceKeys=JEN&amp;contentType=page, comment, blogpost">Show More</a>
    <img class="waiting-image" alt="Please wait" src="images/icons/wait.gif">
</div>
    </div>
</div>
</p></div>
</div>
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h2 id="JenkinsHome-Spacecontributors">Space contributors</h2><p><div class="plugin-contributors"><div class="plugin-contributors"><ul class="contributors-list"><li><a href="/wiki/display/~ggatward"class="url fn">Geoff Gatward</a>  (less than a minute ago)</li></ul></div></div></p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p><br/></p></div>
</div>
</div>
</div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/56197143/78839874.png">SOE Build Process - pipeline - Standard(2).png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/56197143/78839878.png">jks1.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Aug 12, 2017 18:01</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
