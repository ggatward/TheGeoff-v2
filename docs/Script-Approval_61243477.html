<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins SOE : Script Approval</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins SOE</a></span>
                            </li>
                                                    <li>
                                <span><a href="Jenkins-Home_56197143.html">Jenkins Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Deploying-the-pipeline-to-Jenkins_59146267.html">Deploying the pipeline to Jenkins</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins SOE : Script Approval
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Geoff Gatward</span> on Jul 10, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>It it likely that the pipelines will fail for the first few runs, as there are several script approvals that need to be manually performed. Unfortunately these can only be done one at a time, and need the pipeline to re-run to move to the next script.</p><p>Scripts that require one-time manual approval will be triggered at the following stages of the pipeline:</p><ul><li>Checkout</li><li>Approval: Timeout</li><li>Approval: Cancel</li></ul><p>Script approval errors will appear in the console log as a java exception similar to the following:</p><div class="table-wrap"><table class="confluenceTable"><colgroup><col/></colgroup><tbody><tr><td class="confluenceTd"><p><code class="java plain">org.jenkinsci.plugins.scriptsecurity.sandbox.RejectedAccessException: Scripts not permitted to use staticMethod org.codehaus.groovy.runtime.DefaultGroovyMethods padLeft java.lang.String java.lang.Number java.lang.String</code><br/><code class="java spaces">    </code><code class="java plain">at org.jenkinsci.plugins.scriptsecurity.sandbox.whitelists.StaticWhitelist.rejectStaticMethod(StaticWhitelist.java:</code><code class="java value">192</code><code class="java plain">)</code><br/><code class="java spaces">    </code><code class="java plain">at org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.SandboxInterceptor.onMethodCall(SandboxInterceptor.java:</code><code class="java value">95</code><code class="java plain">)</code><br/><code class="java spaces">    </code><code class="java plain">at org.kohsuke.groovy.sandbox.impl.Checker$</code><code class="java value">1</code><code class="java plain">.call(Checker.java:</code><code class="java value">149</code><code class="java plain">)</code><br/><code class="java spaces">    </code><code class="java plain">&lt;snipped&gt;</code><br/><code class="java spaces">    </code><code class="java plain">at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:</code><code class="java value">617</code><code class="java plain">)</code><br/><code class="java spaces">    </code><code class="java plain">at java.lang.Thread.run(Thread.java:</code><code class="java value">748</code><code class="java plain">)</code><br/><code class="java plain">Finished: FAILURE</code></p></td></tr></tbody></table></div><p>To approve a script, navigate in the WebUI to Manage Jenkins → In-process Script Approval.  For each script awaiting approval, verify it is one of the methods required for this project, then click the Approve button.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="203" width="993" src="attachments/61243477/61243480.png?width=993" data-image-src="attachments/61243477/61243480.png" data-unresolved-comment-count="0" data-linked-resource-id="61243480" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jksscr1.png" data-base-url="https://redhat-anzservices.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="61243477" data-linked-resource-container-version="1" data-media-id="7363c7cf-ee9a-4d60-96be-b72fc6095bf5" data-media-type="file"></span></span></p><p>Navigate back to the 'development' branch of the project and attempt to build the project again.</p><p>Repeat the process until all of the listed script methods have been approved. Ensure that each scenario that requires an approval has been excersised.</p><h3 id="ScriptApproval-ApprovedScripts">Approved Scripts</h3><p>The list of scripts that need to be approved for this project is:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code class="java plain">method org.jenkinsci.plugins.workflow.steps.FlowInterruptedException getCauses</code><br/><code class="java plain">method org.jenkinsci.plugins.workflow.support.steps.input.Rejection getUser</code><br/><code class="java plain">staticMethod org.codehaus.groovy.runtime.DefaultGroovyMethods padLeft java.lang.String java.lang.Number java.lang.String</code></p></td></tr></tbody></table></div><p><br/></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/61243477/61243480.png">jksscr1.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Aug 12, 2017 18:01</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
