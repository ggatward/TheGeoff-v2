<!DOCTYPE html>
<html>
    <head>
        <title>Jenkins SOE : Deploying the pipeline to Jenkins</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Jenkins SOE</a></span>
                            </li>
                                                    <li>
                                <span><a href="Jenkins-Home_56197143.html">Jenkins Home</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Jenkins SOE : Deploying the pipeline to Jenkins
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Geoff Gatward</span>, last modified on Jul 12, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>Once the initial Jenkins configuration has been completed, the pipeline project can be deployed. </p><div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>When initially deploying the pipeline job it will deploy all discovered Git branches, and will more than likely fail. This is to be expected as additional configuration needs to be applied after initial deployment.</p></div></div><h2 id="DeployingthepipelinetoJenkins-CreatingtheJenkinsjob">Creating the Jenkins job</h2><p>In the WebUI, on the main Jenkins page, select New Item.</p><p>Enter a name for the project (e.g. RHEL SOE), and select the job type as 'Multibranch Pipeline', then click OK</p><p>The job configuration page will appear. For each of the sections, configure as detailed below.</p><p>The first thing to configure will vary depending on the Git server being used. The configurations tested are below:</p><h3 id="DeployingthepipelinetoJenkins-GitHub">GitHub</h3><p>This configuration is used when the upstream Git repository is hosted in GitHub.</p><ul><li>Select 'GitHub' from the dropdown, and enter the location of the Git project.</li><li>For the Owner, enter the GitHub username for the repository.  This will result in a scan being performed, which should populate the Repository dropdown.</li><li>From the Repository dropdown, select the repository containing this project.</li><li>In the 'Scan Credentials' section, click the Add button, then select the Jenkins store.  Fill in the details as shown, using the repository GitHub credentials.</li></ul><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="403" width="741" src="attachments/59146267/61571079.png?width=741" data-image-src="attachments/59146267/61571079.png" data-unresolved-comment-count="0" data-linked-resource-id="61571079" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jksgithub1.png" data-base-url="https://redhat-anzservices.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59146267" data-linked-resource-container-version="5" data-media-id="1802247e-169a-4fb3-86b7-e7c6471b1d7d" data-media-type="file"></span></p><ul><li><p class="auto-cursor-target">Click the 'Advanced' button under the Repository dropdown, and configure the remainder of the Branch Sources section as shown below:</p><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>What we are doing here is to configure the job to detect all branches in the Git repository. The job will automatically trigger when a push is performed to the repositories - however we only want this to occur on the 'master' branch. We are setting up the 'development' branch to be excluded from automatic triggering via the 'push' webhook from GitHub.</p></div></div></li></ul><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/59146267/61210742.png" data-image-src="attachments/59146267/61210742.png" data-unresolved-comment-count="0" data-linked-resource-id="61210742" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jksgithub7.png" data-base-url="https://redhat-anzservices.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59146267" data-linked-resource-container-version="5" data-media-id="64af65e3-6d73-4935-9f8f-434961eaa063" data-media-type="file"></span></p><ul><li>Configure the remainder of the job as below. Fill in the project security matrix with user/group information and permissions as required.</li></ul><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="988" width="1138" src="attachments/59146267/61472786.png?width=1138" data-image-src="attachments/59146267/61472786.png" data-unresolved-comment-count="0" data-linked-resource-id="61472786" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="jksgithub6.png" data-base-url="https://redhat-anzservices.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59146267" data-linked-resource-container-version="5" data-media-id="5ee0bccb-b5ef-4330-8749-8446f042e68f" data-media-type="file"></span></p><h3 id="DeployingthepipelinetoJenkins-GitLab">GitLab</h3><p>This configuration is used when the upstream Git repository is hosted in GitLab.</p><ul><li>Select 'Git' from the dropdown, and enter the location of the Git project.</li><li>In the 'Credentials' section, click the Add button, then select the Jenkins store.  Fill in the details as shown, using the repository GitLab credentials.</li></ul><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="413" width="672" src="attachments/59146267/62947391.png?width=672" data-image-src="attachments/59146267/62947391.png" data-unresolved-comment-count="0" data-linked-resource-id="62947391" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="gl01.png" data-base-url="https://redhat-anzservices.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59146267" data-linked-resource-container-version="5" data-media-id="09ca514f-1adf-4c29-b3e9-5153e1d1f2b4" data-media-type="file"></span></span></p><ul><li><p class="auto-cursor-target">Click the 'Advanced' button under the Repository browser dropdown, and configure the remainder of the Branch Sources section as shown below:</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"> </span><p>What we are doing here is to configure the job to detect all branches in the Git repository. The job will automatically trigger when a push is performed to the repositories - however we only want this to occur on the 'master' branch. We are setting up the 'development' branch to be excluded from automatic triggering via the 'push' webhook from GitLab.</p></li></ul><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="918" width="931" src="attachments/59146267/62783522.png?width=931" data-image-src="attachments/59146267/62783522.png" data-unresolved-comment-count="0" data-linked-resource-id="62783522" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="gl02.png" data-base-url="https://redhat-anzservices.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59146267" data-linked-resource-container-version="5" data-media-id="6f898a9d-0029-402a-b759-71b656813763" data-media-type="file"></span></span></p><ul><li>Configure the remainder of the job as below. Fill in the project security matrix with user/group information and permissions as required.</li></ul><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image confluence-content-image-border" src="attachments/59146267/63012900.png" data-image-src="attachments/59146267/63012900.png" data-unresolved-comment-count="0" data-linked-resource-id="63012900" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="gl03.png" data-base-url="https://redhat-anzservices.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59146267" data-linked-resource-container-version="5" data-media-id="e6ae9f3e-9f91-44c6-9502-2d2d47a6fc19" data-media-type="file"></span></span></p><p><br/></p><h3 id="DeployingthepipelinetoJenkins-BitBucket">BitBucket</h3><p><br/></p><p><br/></p><p>In all cases, when the configuration is saved, the job will checkout the Jenkinsfile from each branch of the project and run the pipelines.</p><p>Once this occurs, you can move to <a href="Configuration_58294326.html" data-linked-resource-id="58294326" data-linked-resource-version="11" data-linked-resource-type="page">Configuration</a></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59146267/59244557.png">jksp1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59146267/59211811.png">jksp2.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59146267/61571079.png">jksgithub1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59146267/61702148.png">jksgithub2.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59146267/61472781.png">jksgithub3.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59146267/60948687.png">jksgithub5.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59146267/61472786.png">jksgithub6.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59146267/61210742.png">jksgithub7.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59146267/62947391.png">gl01.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59146267/62783522.png">gl02.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59146267/63012900.png">gl03.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Aug 12, 2017 18:01</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
